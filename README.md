# Agents Arena
<div align="center"><img src="https://github.com/rafat/agents-arena/blob/main/public/image.webp"  width="512" alt="WebP Image" /></div>


The concept is old as time itself but the recent unitree robot boxing matches make it clear that we are only a few short years away from fully autonomous robots duking it out in an arena. All thanks to the advancements in AI and Robotics mainly because of reinforcement learning. If there are fighting robots that are good enough to put up an entertaining fight then the audience and money will follow. I believe blockchain/ledger technology will be an integral part of this equation to make sure that there is trust and verfifiability in this process. For this project we are not putting unitree robots to fight. Our "robots" are AI agents powered by OpenAI and the fight outcomes are powered by SEI EVM testnet's verifiable randomness capabilities.

Here is our tech stack : 
1. Contracts (AgentFactory.sol and Arena.sol) deployed on SEI EVM Testnet with verifiable randomness for battle outcomes.
2. Next.js 15+ Frontend
3. Open AI GPT-4O-mini model to make decisions for AI agent based on its "DNA", its record, its opponents' record and some other battle data.
4. Supabase and IPFS(Pinata) to store and cache some data that we don't want stored on the blockchain itself.

The project is live at https://agents-arena.netlify.app/
Requirements: Metamask with SEI EVM Testnet. If the project is not loading for some reason make sure you have SEI testnet on your metamask.

## Contracts

1. Agents factory contract deployed on SEI EVM Testnet at [0xB2a78D06DcADE6d089aB718340ed29D56615D26e](https://seitrace.com/address/0xB2a78D06DcADE6d089aB718340ed29D56615D26e)
2. Arena contract deployed on SEI EVM Testnet at [0x0EBD98777DBFa19E38DBe8B2557e214F99Df90DB](https://seitrace.com/address/0x0EBD98777DBFa19E38DBe8B2557e214F99Df90DB)

   Contracts repository is [here](https://github.com/encoderafat/agents-arena-contracts)

Agents struct at minting
```
Agent({
id: newId,
level: 1,
experience: 0,
dna: newDna,
metadataCID: _metadataCID,
equippedItem: 0
});
```
where initial four dimensional DNA {strength, agility, intelligence, elementalAffibity} is generated using SEI testnet's verifiable randomness to make sure that the agents are sufficiently different from each other. We call it DNA but it is an evolving metrics and agents can level up by fighting and gaining experience.

Arena contract has two functions : startBattle() and fight() 
```
function startBattle(
        uint256 _agent1Id,
        BattleTactics memory _tactics1,
        uint256 _agent2Id,
        BattleTactics memory _tactics2
)

function fight(uint256 _battleId)
```

startBattle() sets up the battle between two agents, generates/emits the battle ID and also stores the tactics that will determine the fight outcome. You call fight() with the battle Id to start the fight. We use verifiable randomness for the entire battle's sequence of events and it is a fight that will last a maximum of three rounds. It is a fairly simple logic with a tie-breaker if the agents somehow end up tied.
 
Tactics are generated by OpenAI's gpt-4o-mini model using a simple customized prompt [available here](https://github.com/rafat/agents-arena/blob/28c730f4cc09b44940d8ebf3f8080881529af1ac/lib/ai/strategy.ts#L53) which returns the tactics in this JSON format
```
{
      "aggressiveness": 50,
      "strategy": "Tactician",
      "riskTolerance": 40,
      "reasoning": "detailed explanation of tactical choices"
    }
```

There is also a simple if-else type of tactics generation step if the AI response fails for some reason.

## Getting Started Locally

Clone the repo. Copy .example file to .env

Open [http://localhost:3000](http://localhost:3000) with your browser to see the result.


## TO-DO And The Next Steps

1. I planned to integrate another contract Itemfactory.sol (check repo) but the project kept ballooning up and given the time constraints I chose not to. The idea is that these equippedItems will improve the chances of an agent. An entire economic ecosystem can develop around these mintable performanche-enhancing NFTs.
2. The AI tactics generation is currently fairly simple and straightforward. I want to build a multi-shot prompt so for example the first prompt is generated from DNA stats only and the second prompt is fully customized from the first prompt and uses all the battle records and data.
3. Develop a more enhanced battle system. For example, an owner with multiple agents can participate in tag team matches with prizes at stake. fight9) logic can also become more complex and last for more rounds.
4. Right now the battle takes place only on the blockchain. My plan is to , yes, fight the battle on the blockchain and then use the data to animate the fight on the front end. This was beyond my capabilities to implement it on a one week schedule but this is something I'm going to implement.
5. Marketplaces : To buy and sell equipped items, agents and anything you can think of. Additionally, when robust contracts are deployed it is also possible to build prediction and betting markets around it.

### Team members
Name : Rafat Hussain

Email: rafat.hsn@gmail.com

Discord: rhsn

Telegram: rhsn999
